(()=>{var t={991:t=>{t.exports=function(){return this.lodash}()},514:t=>{t.exports=function(){return this.wp.apiFetch}()},15:t=>{t.exports=function(){return this.wp.data}()},470:t=>{t.exports=function(){return this.wp.url}()}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r);var t=n(514),e=n.n(t),s=n(15),o=n(991),a=n(470);const i="pll/metabox",l="core/editor",d="core/edit-site";function p(){const t=(0,s.select)(i).getLanguages();return Array.from(t.values()).find((t=>t.is_default))}function u(t,e){const n=(0,a.hasQueryArg)(t.path,"lang");((0,o.isUndefined)(t.filterLang)||t.filterLang)&&!n&&(t.path=(0,a.addQueryArgs)(t.path,{lang:e}))}function c(t){const e=new URL(document.location).searchParams,n=e.get("postType"),r=e.get("postId"),i=(0,s.select)("core/edit-post")?.isEditingTemplate();("wp_template_part"===n&&!(0,o.isNil)(r)||i)&&function(t){t.path=(0,a.addQueryArgs)(t.path,{include_untranslated:!0})}(t)}function g(){return document.getElementById("site-editor")||document.getElementById("edit-site-editor")?(0,s.select)(d).getEditedPostType():(0,s.select)(l).getCurrentPostType()}const f=()=>{const t=(()=>{const t=(0,s.select)(d);if(!t)return null;const e={postId:t.getEditedPostId(),postType:t.getEditedPostType()};if(t.hasOwnProperty("getEditedPostContext")){const n=t.getEditedPostContext();return null!=n&&null!==n.postType&&null!==n.postId?n:e}return e})();return null===t?null:(0,s.select)("core").getEntityRecord("postType",t.postType,t.postId)},y=(t,e,n)=>{const r=t.path.split("?")[0].replace(/^\/+|\/+$/g,"");return Object.values(e).find((t=>r===t))?n(t):t};e().use(((t,e)=>void 0!==t.url||"undefined"==typeof pllFilteredRoutes?e(t):e(y(t,pllFilteredRoutes,_))));const _=t=>{const e=m();if(function(t){return!(0,o.isNil)(t.data)}(t))return function(t){return"POST"===t.method&&t.path.match(/^\/wp\/v2\/template-parts(?:\/|\?|$)/)&&(0,o.isNil)(t.data.from_post)&&(0,o.isNil)(t.data.lang)}(t)&&u(t,p()?.slug),function(t){const e=(0,o.map)((0,s.select)("core").getEntitiesByKind("postType"),(0,o.property)("baseURL")),n=(0,s.select)("core/editor").getCurrentPostId(),r=t.data.id;return-1!==e.findIndex((function(e){return new RegExp(`${(0,o.escapeRegExp)(e)}`).test(t.path)}))&&n===r}(t)||function(t){return"POST"===t.method&&t.path.match(/^\/wp\/v2\/template-parts(?:\/|\?|$)/)&&!(0,o.isNil)(t.data.from_post)&&!(0,o.isNil)(t.data.lang)}(t)||u(t,e),function(t,e){const n=function(t){const e=(0,s.select)("core").getEntitiesByKind("postType"),n=(0,o.find)(e,{name:t});return n?.baseURL}("wp_template_part");if((0,o.isUndefined)(n))return;const r=new RegExp((0,o.escapeRegExp)(n));if("POST"==t.method&&r.test(t.path)){if(!(0,s.select)(i).getLanguages().get(e).is_default){const n="___"+e;t.data.slug+=n}}}(t,e),t;"wp_template"===g()&&u(t,p()?.slug);return new RegExp(/^\/wp\/v2\/template-parts\/?(?:\?.*)?$/).test(t.path)&&c(t),u(t,e),t};function m(){if((0,o.isUndefined)((0,s.select)(l)))return pll_block_editor_plugin_settings.lang.slug;const t=(0,s.select)(l).getEditedPostAttribute("lang");if(!(0,o.isUndefined)(t)&&t)return t;const e=new URL(document.location).searchParams,n=e.get("postType"),r=e.get("postId");if("wp_template_part"===n&&(0,o.isNil)(r))return pll_block_editor_plugin_settings.lang=p(),pll_block_editor_plugin_settings.lang.slug;const a=f(),i=a?.lang;return!(0,o.isUndefined)(i)&&i?i:pll_block_editor_plugin_settings.lang.slug}"undefined"!=typeof jQuery&&jQuery((function(t){t.ajaxPrefilter((function(t,e,n){if(-1!=t.url.indexOf(ajaxurl)||-1!=ajaxurl.indexOf(t.url)){const r=m(),s={lang:r};function o(){const e="lang="+r;if(void 0===t.data||""===t.data.trim())t.data=e;else try{t.data=JSON.stringify(Object.assign(JSON.parse(t.data),s))}catch(n){t.data=t.data+"&"+e}}t.processData||void 0===t.data||"string"==typeof t.data?o():t.data=Object.assign(t.data||{},s)}}))}))})(),this["polylang-pro"]=r})();