(()=>{var t={757:(t,e,n)=>{t.exports=n(666)},184:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var a=typeof n;if("string"===a||"number"===a)t.push(n);else if(Array.isArray(n)&&n.length){var i=o.apply(null,n);i&&t.push(i)}else if("object"===a)for(var s in n)r.call(n,s)&&n[s]&&t.push(s)}}return t.join(" ")}t.exports?(o.default=o,t.exports=o):void 0===(n=function(){return o}.apply(e,[]))||(t.exports=n)}()},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),i=new k(r||[]);return a._invoke=function(t,e,n){var r=p;return function(o,a){if(r===d)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw a;return T()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=O(i,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=u(t,e,n);if("normal"===l.type){if(r=n.done?g:f,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=g,n.method="throw",n.arg=l.arg)}}}(t,n,i),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",d="executing",g="completed",h={};function v(){}function y(){}function m(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(L([])));_&&_!==n&&r.call(_,a)&&(b=_);var E=m.prototype=v.prototype=Object.create(b);function P(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,a,i,s){var l=u(t[o],t,a);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==typeof p&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(p).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,s)}))}s(l.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=u(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function L(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:T}}function T(){return{value:e,done:!0}}return y.prototype=E.constructor=m,m.constructor=y,y.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},P(S.prototype),S.prototype[i]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(E),l(E,s,"Generator"),E[a]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},804:t=>{t.exports=function(){return this.lodash}()},839:t=>{t.exports=function(){return this.wp.apiFetch}()},587:t=>{t.exports=function(){return this.wp.components}()},390:t=>{t.exports=function(){return this.wp.compose}()},197:t=>{t.exports=function(){return this.wp.data}()},219:t=>{t.exports=function(){return this.wp.editPost}()},2:t=>{t.exports=function(){return this.wp.element}()},664:t=>{t.exports=function(){return this.wp.htmlEntities}()},57:t=>{t.exports=function(){return this.wp.i18n}()},750:t=>{t.exports=function(){return this.wp.keycodes}()},601:t=>{t.exports=function(){return this.wp.plugins}()},684:t=>{t.exports=function(){return this.wp.primitives}()},696:t=>{t.exports=function(){return this.wp.url}()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r);var t=n(2),e=n(601),o=n(219),a=n(57);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?f(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=n(197),v=n(804),y=n(839),m=n.n(y),b=n(696);function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=n(587),E=n(390);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var O=function(e){u(r,e);var n=S(r);function r(){var e;return i(this,r),(e=n.apply(this,arguments)).confirmButton=(0,t.createRef)(),e}return l(r,[{key:"componentDidMount",value:function(){this.confirmButton.current.focus()}},{key:"render",value:function(){var e=this.props,n=e.idPrefix,r=e.title,o=e.updateState,i=e.handleChange,s=e.children;return(0,t.createElement)(_.Modal,{title:r,className:"confirmBox",onRequestClose:o,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,focusOnMount:!1},s,(0,t.createElement)(_.ButtonGroup,{className:"buttons"},(0,t.createElement)(_.Button,{id:"".concat(n,"_confirm"),ref:this.confirmButton,isPrimary:!0,onClick:function(t){i(t),o()}},(0,a.__)("OK","polylang-pro")),(0,t.createElement)(_.Button,{id:"".concat(n,"_cancel"),isSecondary:!0,onClick:function(){return o()}},(0,a.__)("Cancel","polylang-pro"))))}}]),r}(t.Component);const x=function(e,n,r){return(0,E.createHigherOrderComponent)((function(o){var a=function(a){u(c,a);var s=S(c);function c(){var t;return i(this,c),(t=s.apply(this,arguments)).state={isOpen:!1,changeValue:null},t.handleChange=t.handleChange.bind(f(t)),t}return l(c,[{key:"handleChange",value:function(t){var e=o.getChangeValue(t);!(0,v.isUndefined)(o.bypassConfirmation)&&o.bypassConfirmation(this.props.translationData)?r(e):this.setState({isOpen:!0,changeValue:e})}},{key:"render",value:function(){var a=this,i=this.props,s=Object.assign({},function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},i),{handleChange:this.handleChange});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o,s),this.state.isOpen&&(0,t.createElement)(O,{title:o.labelConfirmationModal,idPrefix:e,handleChange:function(){return r(a.state.changeValue)},updateState:function(){return a.setState({isOpen:!1,changeValue:null})}},(0,t.createElement)(n,null)))}}]),c}(t.Component);return a.bypassConfirmation=o.bypassConfirmation,a.getChangeValue=o.getChangeValue,a}),"withConfirmation")};var C="pll/metabox",k="core/editor",L={languages:[],selectedLanguage:{},translatedPosts:{},fromPost:null};function T(t,e){var n=new Map;return t.reduce((function(t,n){return t.set(n[e],n),t}),n),n}function N(t){var e={};return t.forEach((function(t,e,n){this[e]=(0,v.isBoolean)(t)?t.toString():t}),e),e}function j(t){return(0,h.select)(C).getLanguages().get(t)}function R(t,e,n){var r=D(e,n),o=(0,h.select)(C).getFromPost(),a=new Map(Object.entries([]));return(0,v.isUndefined)(t)||(a=new Map(Object.entries(t))),(0,v.isNil)(o)||(0,v.isNil)(o.id)||r.forEach((function(t,e){(0,v.isNil)(t.translated_post)||(0,v.isNil)(t.translated_post.id)||a.set(e,t.translated_post.id)})),a}function A(t){var e=new Map(Object.entries([]));return(0,v.isUndefined)(t)||(e=new Map(Object.entries(t))),e}function D(t,e){var n=new Map(Object.entries([]));return(0,v.isUndefined)(t)||(n=new Map(Object.entries(t))),n}var U=n(684);const z=!(0,v.isUndefined)(wp.primitives)?(0,t.createElement)(U.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,t.createElement)(U.Path,{d:"M6 15v-13h10v13h-10zM5 16h8v2h-10v-13h2v11z"})):"admin-page";const F=!(0,v.isUndefined)(wp.primitives)?(0,t.createElement)(U.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,t.createElement)(U.Path,{d:"M13.89 3.39l2.71 2.72c0.46 0.46 0.42 1.24 0.030 1.64l-8.010 8.020-5.56 1.16 1.16-5.58s7.6-7.63 7.99-8.030c0.39-0.39 1.22-0.39 1.68 0.070zM11.16 6.18l-5.59 5.61 1.11 1.11 5.54-5.65zM8.19 14.41l5.58-5.6-1.070-1.080-5.59 5.6z"})):"edit";const M=!(0,v.isUndefined)(wp.primitives)?(0,t.createElement)(U.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,t.createElement)(U.Path,{d:"M17 7v3h-5v5h-3v-5h-5v-3h5v-5h3v5h5z"})):"plus";const B=!(0,v.isUndefined)(wp.primitives)?(0,t.createElement)(U.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,t.createElement)(U.Path,{d:"M5 7v3l-2 1.5v-6.5h11v-2l4 3.010-4 2.99v-2h-9zM15 13v-3l2-1.5v6.5h-11v2l-4-3.010 4-2.99v2h9z"})):"controls-repeat";const I=!(0,v.isUndefined)(wp.primitives)?(0,t.createElement)(U.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,t.createElement)(U.Path,{d:"M11 7H9.49c-.63 0-1.25.3-1.59.7L7 5H4.13l-2.39 7h1.69l.74-2H7v4H2c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h7c1.1 0 2 .9 2 2v2zM6.51 9H4.49l1-2.93zM10 8h7c1.1 0 2 .9 2 2v7c0 1.1-.9 2-2 2h-7c-1.1 0-2-.9-2-2v-7c0-1.1.9-2 2-2zm7.25 5v-1.08h-3.17V9.75h-1.16v2.17H9.75V13h1.28c.11.85.56 1.85 1.28 2.62-.87.36-1.89.62-2.31.62-.01.02.22.97.2 1.46.84 0 2.21-.5 3.28-1.15 1.09.65 2.48 1.15 3.34 1.15-.02-.49.2-1.44.2-1.46-.43 0-1.49-.27-2.38-.63.7-.77 1.14-1.77 1.25-2.61h1.36zm-3.81 1.93c-.5-.46-.85-1.13-1.01-1.93h2.09c-.17.8-.51 1.47-1 1.93l-.04.03s-.03-.02-.04-.03z"})):"translation";function V(e){var n=e.handleChange,r=e.children,o=e.selectedLanguage,a=void 0===o?null:o,i=e.defaultValue,s=void 0===i?"":i,l=null!=a&&a.slug?a.slug:s;return(0,t.createElement)("div",{id:"select-post-language"},(0,t.createElement)(G,{language:a}),r&&(0,t.createElement)("select",{value:l,onChange:function(t){return n(t)},id:"pll_post_lang_choice",name:"pll_post_lang_choice",className:"post_lang_choice"},r))}function W(e){var n=e.languages;return Array.from(n.values()).map((function(e){var n=e.slug,r=e.name,o=e.w3c;return(0,t.createElement)("option",{value:n,lang:o,key:n},r)}))}function G(e){var n=e.language;return(0,v.isNil)(n)?(0,t.createElement)("span",{className:"pll-translation-icon"},I):(0,v.isEmpty)(n.flag_url)?(0,t.createElement)("abbr",null,n.slug,(0,t.createElement)("span",{className:"screen-reader-text"},n.name)):(0,t.createElement)("span",{className:"pll-select-flag"},(0,t.createElement)("img",{src:n.flag_url,alt:n.name,title:n.name,className:"flag"}))}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var K=function(e){u(r,e);var n=H(r);function r(){return i(this,r),n.apply(this,arguments)}return l(r,[{key:"render",value:function(){var e=(0,h.select)(C).getLanguages(),n=j((0,h.select)(k).getEditedPostAttribute("lang"));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",null,(0,t.createElement)("strong",null,(0,a.__)("Language","polylang-pro"))),(0,t.createElement)("label",{className:"screen-reader-text",htmlFor:"pll_post_lang_choice"},(0,a.__)("Language","polylang-pro")),(0,t.createElement)(V,{selectedLanguage:n,handleChange:this.props.handleChange},(0,t.createElement)(W,{languages:e})))}}],[{key:"bypassConfirmation",value:function(){var t=(0,h.select)(k);return!t.getEditedPostAttribute("title")&&!t.getEditedPostContent()&&!t.getEditedPostAttribute("excerpt")}},{key:"getChangeValue",value:function(t){return t.target.value}},{key:"handleLanguageChange",value:function(t){var e=(0,h.select)(k).getEditedPostAttribute("lang"),n=(0,h.select)(k).getCurrentPostId(),o=(0,h.select)(C).getLanguages().get(t),a=j(e),i=A((0,h.select)(k).getEditedPostAttribute("pll_sync_post")),s=(0,h.select)(k).getEditedPostAttribute("translations_table"),l=R((0,h.select)(k).getEditedPostAttribute("translations"),s,a.slug),c=D(s,a.slug);l.delete(a.slug),l.set(o.slug,n),i.delete(a.slug);var u=c.get(a.slug);c.set(a.slug,{can_synchronize:u.can_synchronize,lang:u.lang,links:{add_link:u.links.add_link}});var p=c.get(o.slug);c.set(o.slug,{can_synchronize:p.can_synchronize,lang:p.lang,links:u.links,translated_post:u.translated_post}),pll_block_editor_plugin_settings=o,(0,h.dispatch)(k).editPost({lang:o.slug}),(0,h.dispatch)(k).editPost({pll_sync_post:N(i)}),(0,h.dispatch)(k).editPost({translations:N(l)}),(0,h.dispatch)(k).editPost({translations_table:N(c)}),(0,h.dispatch)(k).savePost(),r.forceLanguageSave(a.slug),r.invalidateParentPagesStoredInCore()}},{key:"forceLanguageSave",value:function(t){var e=(0,h.select)(k);e.getEditedPostAttribute("title")||e.getEditedPostContent()||e.getEditedPostAttribute("excerpt")||m()({path:(0,b.addQueryArgs)("wp/v2/posts/".concat(e.getCurrentPostId()),{lang:t}),method:"POST"})}},{key:"invalidateParentPagesStoredInCore",value:function(){var t=(0,h.select)(k).getCurrentPostId(),e=(0,h.select)(k).getEditedPostAttribute("type"),n={per_page:-1,exclude:t,parent_exclude:t,orderby:"menu_order",order:"asc"};(0,h.dispatch)("core/data").invalidateResolution("core","getEntityRecords",["postType",e,n])}}]),r}(t.Component);K.labelConfirmationModal=(0,a.__)("Change language","polylang-pro");const q=x("pll_change_lang",(function(){return(0,t.createElement)("p",null,(0,a.__)("Are you sure you want to change the language of the current content?","polylang-pro"))}),K.handleLanguageChange)(K);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}const Q=function(e){u(r,e);var n=Y(r);function r(){var t;i(this,r),t=n.apply(this,arguments);var e=(0,h.select)(C).getCurrentUser();return t.postType=(0,h.select)(k).getCurrentPostType(),t.state={isDuplicateActive:t.isDuplicateActive(e),currentUser:e},t.handleDuplicateContentChange=t.handleDuplicateContentChange.bind(f(t)),t.setState=t.setState.bind(f(t)),t}return l(r,[{key:"isDuplicateActive",value:function(t){return void 0!==p(t.pll_duplicate_content)&&void 0!==p(t.pll_duplicate_content[this.postType])&&t.pll_duplicate_content[this.postType]}},{key:"handleDuplicateContentChange",value:function(t){var e=this.state.currentUser;(0,v.isString)(e.pll_duplicate_content)&&(e.pll_duplicate_content={}),e.pll_duplicate_content[this.postType]=!this.state.isDuplicateActive,this.setState({currentUser:e,isDuplicateActive:!this.state.isDuplicateActive}),(0,h.dispatch)(C).setCurrentUser({pll_duplicate_content:e.pll_duplicate_content},!0)}},{key:"render",value:function(){var e=this.state.isDuplicateActive,n=this.state.isDuplicateActive?(0,a.__)("Deactivate the content duplication","polylang-pro"):(0,a.__)("Activate the content duplication","polylang-pro");return(0,t.createElement)(_.IconButton,{id:"pll-duplicate",className:"pll-button ".concat(e&&"wp-ui-text-highlight"),onClick:this.handleDuplicateContentChange,icon:z,label:n},(0,t.createElement)("span",{className:"screen-reader-text"},n))}}]),r}(t.Component);function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var X=function(e){u(r,e);var n=$(r);function r(){return i(this,r),n.apply(this,arguments)}return l(r,[{key:"render",value:function(){var e=this,n=A((0,h.select)(k).getEditedPostAttribute("pll_sync_post")),r=this.props.translationData,o=!(0,v.isEmpty)(n)&&n.has(r.lang.slug),i=o&&"wp-ui-text-highlight",s=o?(0,a.__)("Don't synchronize this post","polylang-pro"):(0,a.__)("Synchronize this post","polylang-pro");return(0,t.createElement)(_.IconButton,{icon:B,label:s,id:"pll_sync_post[".concat(r.lang.slug,"]"),className:"pll-button ".concat(i),onClick:function(t){e.props.handleChange(t)}},(0,t.createElement)("span",{className:"screen-reader-text"},s))}}],[{key:"handleSynchronizationChange",value:function(t){var e=A((0,h.select)(k).getEditedPostAttribute("pll_sync_post"));e.has(t)?e.delete(t):e.set(t,!0),(0,h.dispatch)(k).editPost({pll_sync_post:N(e)}),(0,h.dispatch)(k).editPost({title:(0,h.select)(k).getEditedPostAttribute("title")})}},{key:"bypassConfirmation",value:function(t){var e=A((0,h.select)(k).getEditedPostAttribute("pll_sync_post")),n=!(0,v.isEmpty)(e)&&e.has(t.lang.slug),r=!(0,v.isUndefined)(t.translated_post)&&!(0,v.isNil)(t.translated_post.id);return n||!r}},{key:"getChangeValue",value:function(t){return t.currentTarget.id.match(/\[(.[^[]+)\]/i)[1]}}]),r}(t.Component);X.labelConfirmationModal=(0,a.__)("Synchronize this post","polylang-pro");const J=x("pll_sync_post",(function(){return(0,t.createElement)("p",null,(0,a.__)("You are about to overwrite an existing translation. Are you sure you want to proceed?","polylang-pro"))}),X.handleSynchronizationChange)(X);const Z=function(e){var n=e.translationData,r=!(0,v.isUndefined)(n.translated_post)&&!(0,v.isNil)(n.translated_post.id),o=!(0,v.isUndefined)(n.links)&&!(0,v.isNil)(n.links.edit_link),i=!(0,v.isUndefined)(n.links)&&!(0,v.isEmpty)(n.links.add_link),s=M,l=(0,a.sprintf)((0,a.__)("Add a translation in %s","polylang-pro"),n.lang.name),c=decodeURI(n.links.add_link);return r&&(s=F,l=(0,a.sprintf)((0,a.__)("Edit the translation in %s","polylang-pro"),n.lang.name),c=decodeURI(n.links.edit_link)),!i&&!r||!o&&r?null:(0,t.createElement)(_.IconButton,{href:c,icon:s,label:l,className:"pll-button"},(0,t.createElement)("span",{className:"screen-reader-text"},l))};var tt=n(184),et=n.n(tt);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!=typeof n){var o=t.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function it(t){return at(t)}function st(t){return at(t,!0)}function lt(t){var e=function(t){var e,n,r,o=t.ownerDocument,a=o.body,i=o&&o.documentElement;return n=(e=t.getBoundingClientRect()).left,r=e.top,{left:n-=i.clientLeft||a.clientLeft||0,top:r-=i.clientTop||a.clientTop||0}}(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=it(r),e.top+=st(r),e}var ct,ut=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),pt=/^(top|right|bottom|left)$/;function ft(t,e){for(var n=0;n<t.length;n++)e(t[n])}function dt(t){return"border-box"===ct(t,"boxSizing")}"undefined"!=typeof window&&(ct=window.getComputedStyle?function(t,e,n){var r="",o=t.ownerDocument,a=n||o.defaultView.getComputedStyle(t,null);return a&&(r=a.getPropertyValue(e)||a[e]),r}:function(t,e){var n=t.currentStyle&&t.currentStyle[e];if(ut.test(n)&&!pt.test(e)){var r=t.style,o=r.left,a=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,r.left="fontSize"===e?"1em":n||0,n=r.pixelLeft+"px",r.left=o,t.runtimeStyle.left=a}return""===n?"auto":n});var gt=["margin","border","padding"];function ht(t,e,n){var r,o={},a=t.style;for(r in e)e.hasOwnProperty(r)&&(o[r]=a[r],a[r]=e[r]);for(r in n.call(t),e)e.hasOwnProperty(r)&&(a[r]=o[r])}function vt(t,e,n){var r,o,a,i=0;for(o=0;o<e.length;o++)if(r=e[o])for(a=0;a<n.length;a++){var s=void 0;s="border"===r?"".concat(r+n[a],"Width"):r+n[a],i+=parseFloat(ct(t,s))||0}return i}function yt(t){return null!=t&&t==t.window}var mt={};function bt(t,e,n){if(yt(t))return"width"===e?mt.viewportWidth(t):mt.viewportHeight(t);if(9===t.nodeType)return"width"===e?mt.docWidth(t):mt.docHeight(t);var r="width"===e?["Left","Right"]:["Top","Bottom"],o="width"===e?t.offsetWidth:t.offsetHeight,a=(ct(t),dt(t)),i=0;(null==o||o<=0)&&(o=void 0,(null==(i=ct(t,e))||Number(i)<0)&&(i=t.style[e]||0),i=parseFloat(i)||0),void 0===n&&(n=a?1:-1);var s=void 0!==o||a,l=o||i;if(-1===n)return s?l-vt(t,["border","padding"],r):i;if(s){var c=2===n?-vt(t,["border"],r):vt(t,["margin"],r);return l+(1===n?0:c)}return i+vt(t,gt.slice(n),r)}ft(["Width","Height"],(function(t){mt["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],mt["viewport".concat(t)](n))},mt["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,o=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}}));var wt={position:"absolute",visibility:"hidden",display:"block"};function _t(t){var e,n=arguments;return 0!==t.offsetWidth?e=bt.apply(void 0,n):ht(t,wt,(function(){e=bt.apply(void 0,n)})),e}function Et(t,e,n){var r=n;if("object"!==nt(e))return void 0!==r?("number"==typeof r&&(r+="px"),void(t.style[e]=r)):ct(t,e);for(var o in e)e.hasOwnProperty(o)&&Et(t,o,e[o])}ft(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);mt["outer".concat(e)]=function(e,n){return e&&_t(e,t,n?0:1)};var n="width"===t?["Left","Right"]:["Top","Bottom"];mt[t]=function(e,r){if(void 0===r)return e&&_t(e,t,-1);if(e){ct(e);return dt(e)&&(r+=vt(e,["padding","border"],n)),Et(e,t,r)}}}));var Pt=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(n,!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({getWindow:function(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},offset:function(t,e){if(void 0===e)return lt(t);!function(t,e){"static"===Et(t,"position")&&(t.style.position="relative");var n,r,o=lt(t),a={};for(r in e)e.hasOwnProperty(r)&&(n=parseFloat(Et(t,r))||0,a[r]=n+e[r]-o[r]);Et(t,a)}(t,e)},isWindow:yt,each:ft,css:Et,clone:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);if(t.overflow)for(var r in t)t.hasOwnProperty(r)&&(e.overflow[r]=t.overflow[r]);return e},scrollLeft:function(t,e){if(yt(t)){if(void 0===e)return it(t);window.scrollTo(e,st(t))}else{if(void 0===e)return t.scrollLeft;t.scrollLeft=e}},scrollTop:function(t,e){if(yt(t)){if(void 0===e)return st(t);window.scrollTo(it(t),e)}else{if(void 0===e)return t.scrollTop;t.scrollTop=e}},viewportWidth:0,viewportHeight:0},mt);const St=function(t,e,n){n=n||{},9===e.nodeType&&(e=Pt.getWindow(e));var r=n.allowHorizontalScroll,o=n.onlyScrollIfNeeded,a=n.alignWithTop,i=n.alignWithLeft,s=n.offsetTop||0,l=n.offsetLeft||0,c=n.offsetBottom||0,u=n.offsetRight||0;r=void 0===r||r;var p,f,d,g,h,v,y,m,b,w,_=Pt.isWindow(e),E=Pt.offset(t),P=Pt.outerHeight(t),S=Pt.outerWidth(t);_?(y=e,w=Pt.height(y),b=Pt.width(y),m={left:Pt.scrollLeft(y),top:Pt.scrollTop(y)},h={left:E.left-m.left-l,top:E.top-m.top-s},v={left:E.left+S-(m.left+b)+u,top:E.top+P-(m.top+w)+c},g=m):(p=Pt.offset(e),f=e.clientHeight,d=e.clientWidth,g={left:e.scrollLeft,top:e.scrollTop},h={left:E.left-(p.left+(parseFloat(Pt.css(e,"borderLeftWidth"))||0))-l,top:E.top-(p.top+(parseFloat(Pt.css(e,"borderTopWidth"))||0))-s},v={left:E.left+S-(p.left+d+(parseFloat(Pt.css(e,"borderRightWidth"))||0))+u,top:E.top+P-(p.top+f+(parseFloat(Pt.css(e,"borderBottomWidth"))||0))+c}),h.top<0||v.top>0?!0===a?Pt.scrollTop(e,g.top+h.top):!1===a?Pt.scrollTop(e,g.top+v.top):h.top<0?Pt.scrollTop(e,g.top+h.top):Pt.scrollTop(e,g.top+v.top):o||((a=void 0===a||!!a)?Pt.scrollTop(e,g.top+h.top):Pt.scrollTop(e,g.top+v.top)),r&&(h.left<0||v.left>0?!0===i?Pt.scrollLeft(e,g.left+h.left):!1===i?Pt.scrollLeft(e,g.left+v.left):h.left<0?Pt.scrollLeft(e,g.left+h.left):Pt.scrollLeft(e,g.left+v.left):o||((i=void 0===i||!!i)?Pt.scrollLeft(e,g.left+h.left):Pt.scrollLeft(e,g.left+v.left)))};var Ot=n(664),xt=n(750);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var kt=function(t){return t.stopPropagation()},Lt=function(e){u(r,e);var n=Ct(r);function r(){var t;return i(this,r),(t=n.apply(this,arguments)).onChange=t.onChange.bind(f(t)),t.onKeyDown=t.onKeyDown.bind(f(t)),t.bindListNode=t.bindListNode.bind(f(t)),t.updateSuggestions=(0,v.throttle)(t.updateSuggestions.bind(f(t)),200),t.suggestionNodes=[],t.state={posts:[],showSuggestions:!1,selectedSuggestion:null},t}return l(r,[{key:"componentDidUpdate",value:function(){var t=this,e=this.state,n=e.showSuggestions,r=e.selectedSuggestion;n&&null!==r&&!this.scrollingIntoView&&(this.scrollingIntoView=!0,St(this.suggestionNodes[r],this.listNode,{onlyScrollIfNeeded:!0}),setTimeout((function(){t.scrollingIntoView=!1}),100))}},{key:"componentWillUnmount",value:function(){delete this.suggestionsRequest}},{key:"bindListNode",value:function(t){this.listNode=t}},{key:"bindSuggestionNode",value:function(t){var e=this;return function(n){e.suggestionNodes[t]=n}}},{key:"updateSuggestions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.length<2&&!n)this.setState({showSuggestions:!1,selectedSuggestion:null,loading:!1});else{this.setState({selectedSuggestion:null,loading:!0});var r=(0,h.select)(k).getCurrentPostId(),o=(0,h.select)(k).getCurrentPostType(),i=(0,h.select)(k).getEditedPostAttribute("lang"),s=this.props.translationData.lang.slug,l=m()({path:(0,b.addQueryArgs)("/pll/v1/untranslated-posts",{search:t,include:r,untranslated_in:i,lang:s,type:o,is_block_editor:!0}),filterLang:!1});l.then((function(t){e.suggestionsRequest===l&&(e.setState({posts:t,showSuggestions:!0,loading:!1}),t.length?e.props.debouncedSpeak((0,a.sprintf)((0,a._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",t.length,"polylang-pro"),t.length),"assertive"):e.props.debouncedSpeak((0,a.__)("No results.","polylang-pro"),"assertive"))})).catch((function(){e.suggestionsRequest===l&&e.setState({loading:!1})})),this.suggestionsRequest=l}}},{key:"onChange",value:function(t){var e=t.target.value,n=this.props.translatedPosts,r=this.props.translationsTable,o=this.props.translationData.lang;this.props.onChange({value:e,translatedPosts:n,translationsTable:r,language:o}),this.updateSuggestions(e)}},{key:"onKeyDown",value:function(t){var e=this.state,n=e.showSuggestions,r=e.selectedSuggestion,o=e.posts,a=e.loading,i=t.target.value,s=!1;if(n&&o.length&&!a)switch(t.keyCode){case xt.UP:t.stopPropagation(),t.preventDefault();var l=r?r-1:o.length-1;this.setState({selectedSuggestion:l});break;case xt.DOWN:t.stopPropagation(),t.preventDefault();var c=null===r||r===o.length-1?0:r+1;this.setState({selectedSuggestion:c});break;case xt.ENTER:if(null!==this.state.selectedSuggestion){t.stopPropagation();var u=this.state.posts[this.state.selectedSuggestion];this.selectLink(u)}break;case xt.ESCAPE:t.stopPropagation(),this.setState({selectedSuggestion:null,showSuggestions:!1})}else{switch(t.keyCode){case xt.SPACE:var p=t.ctrlKey,f=t.shiftKey,d=t.altKey,g=t.metaKey;p&&!(f||d||g)&&(i="",s=!0);break;case xt.BACKSPACE:(0,v.isEmpty)(i)&&(s=!0)}s&&this.updateSuggestions(i,!0)}}},{key:"selectLink",value:function(t){var e=this.props.translationsTable,n=this.props.translatedPosts,r=this.props.translationData.lang;this.props.onChange({value:t.title.rendered,post:t,translatedPosts:n,translationsTable:e,language:r}),this.setState({selectedSuggestion:null,showSuggestions:!1})}},{key:"render",value:function(){var e=this,n=this.props,r=n.value,o=void 0===r?"":r,i=n.autoFocus,s=void 0===i||i,l=n.instanceId,c=n.translationData,u=c.lang,p=this.state,f=p.showSuggestions,d=p.posts,g=p.selectedSuggestion,h=p.loading,y=!(0,v.isUndefined)(c.links)&&((0,v.isUndefined)(c.links.edit_link)||!(0,v.isUndefined)(c.links.edit_link)&&!(0,v.isNull)(c.links.edit_link));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"translation-input"},(0,t.createElement)("input",{lang:u.w3c,dir:u.is_rtl?"rtl":"ltr",style:{direction:u.is_rtl?"rtl":"ltr"},autoFocus:s,disabled:!y,type:"text","aria-label":(0,a.__)("URL","polylang-pro"),required:!0,value:o,onChange:this.onChange,onInput:kt,placeholder:(0,a.__)("Start typing the post title","polylang-pro"),onKeyDown:this.onKeyDown,role:"combobox","aria-expanded":f,"aria-autocomplete":"list","aria-owns":"translation-input-suggestions-".concat(l),"aria-activedescendant":null!==g?"translation-input-suggestion-".concat(l,"-").concat(g):void 0}),h&&(0,t.createElement)(_.Spinner,null)),f&&!!d.length&&(0,t.createElement)(_.Popover,{position:"bottom",noArrow:!0,focusOnMount:!1},(0,t.createElement)("div",{className:"translation-input__suggestions",id:"translation-input-suggestions-".concat(l),ref:this.bindListNode,role:"listbox"},d.map((function(n,r){return(0,t.createElement)("button",{key:n.id,role:"option",tabIndex:"-1",id:"translation-input-suggestion-".concat(l,"-").concat(r),ref:e.bindSuggestionNode(r),className:et()("translation-input__suggestion",{"is-selected":r===g}),onClick:function(){return e.selectLink(n)},"aria-selected":r===g},(0,Ot.decodeEntities)(n.title.rendered)||(0,a.__)("(no title)","polylang-pro"))})))))}}]),r}(t.Component);const Tt=(0,_.withSpokenMessages)((0,E.withInstanceId)(Lt));var Nt=function(t){var e=t.value,n=t.post,r=void 0===n?null:n,o=t.translatedPosts,a=t.translationsTable,i=t.language,s=a.get(i.slug);(0,v.isEmpty)(r)?(s.translated_post={id:null,title:e},s.links={add_link:s.links.add_link},o.delete(i.slug)):(o.set(i.slug,r.id),s.translated_post={id:r.id,title:r.title.rendered},s.links.edit_link=r.edit_link),a.set(i.slug,s),(0,h.dispatch)(k).editPost({translations:N(o)}),(0,h.dispatch)(k).editPost({title:(0,h.select)(k).getEditedPostAttribute("title")})};const jt=function(e){var n=e.selectedLanguage,r=e.translationsTable,o=e.translatedPosts,i=e.synchronizedPosts;e.handleSynchronizationChange;return(0,t.createElement)("div",{id:"post-translations",className:"translations"},(0,t.createElement)("p",null,(0,t.createElement)("strong",null,(0,a.__)("Translations","polylang-pro"))),(0,t.createElement)("table",null,(0,t.createElement)("tbody",null,Array.from(r.values()).map((function(e){var s=!(0,v.isEmpty)(i)&&i.has(e.lang.slug);!(0,v.isUndefined)(e.translated_post)&&(0,v.isNil)(e.translated_post.id),s?(0,a.__)("Don't synchronize this post","polylang-pro"):(0,a.__)("Synchronize this post","polylang-pro");return n.slug!==e.lang.slug&&(0,t.createElement)("tr",{key:e.lang.slug},(0,t.createElement)("th",{className:"pll-language-column"},(0,v.isEmpty)(e.lang.flag)?(0,t.createElement)("abbr",null,e.lang.slug,(0,t.createElement)("span",{className:"screen-reader-text"},e.lang.name)):(0,t.createElement)("span",{className:"pll-select-flag flag"},(0,t.createElement)("img",{src:e.lang.flag_url,alt:e.lang.name,title:e.lang.name}))),(0,t.createElement)("td",{className:"pll-edit-column pll-column-icon"},(0,t.createElement)(Z,{translationData:e})),(0,t.createElement)("td",{className:"pll-sync-column pll-column-icon"},e.can_synchronize&&(0,t.createElement)(J,{translationData:e})),(0,t.createElement)("td",{className:"pll-translation-column"},(0,t.createElement)("label",{className:"screen-reader-text",htmlFor:"tr_lang_".concat(e.lang.slug)},(0,a.__)("Translation","polylang-pro")),(0,t.createElement)(Tt,{id:"htr_lang_".concat(e.lang.slug),autoFocus:!1,translationsTable:r,translatedPosts:o,translationData:e,value:(0,v.isUndefined)(e.translated_post)?"":e.translated_post.title,onChange:Nt})))})))))};function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var At=function(e){u(r,e);var n=Rt(r);function r(){return i(this,r),n.apply(this,arguments)}return l(r,[{key:"render",value:function(){return(0,t.createElement)("div",{className:"components-panel__body is-opened"},(0,v.isNil)(this.props.selectedLanguage)?(0,t.createElement)("div",{className:"pll-metabox-error components-notice is-error"},(0,a.__)("Unable to retrieve the content language","polylang-pro")):(0,t.createElement)("form",{className:"pll-metabox-location"},(0,t.createElement)(q,null),(0,t.createElement)(Q,null),(0,t.createElement)(jt,{selectedLanguage:this.props.selectedLanguage,translationsTable:this.props.translationsTable,synchronizedPosts:this.props.synchronizedPosts,translatedPosts:this.props.translatedPosts})))}}]),r}(t.Component);const Dt=(0,h.withSelect)((function(t){var e=t(k).getEditedPostAttribute("lang"),n=t(k).getEditedPostAttribute("translations_table"),r=t(k).getEditedPostAttribute("translations"),o=t(k).getEditedPostAttribute("pll_sync_post");return{selectedLanguage:j(e),translationsTable:D(n),translatedPosts:R(r,n,e),synchronizedPosts:A(o)}}))(At);const Ut=function(){return(0,t.createElement)(o.PluginSidebar,{name:"polylang-sidebar",title:(0,a.__)("Languages","polylang-pro")},(0,t.createElement)(Dt,null))};const zt=function(){return(0,t.createElement)(o.PluginSidebarMoreMenuItem,{target:"polylang-sidebar"},(0,a.__)("Languages","polylang-pro"))};var Ft=n(757),Mt=n.n(Ft);function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vt={setLanguages:function(t){return{type:"SET_LANGUAGES",languages:t}},setCurrentUser:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"SET_CURRENT_USER",currentUser:t,save:e}},setFromPost:function(t){return{type:"SET_FROM_POST",fromPost:t}},fetchFromAPI:function(t){return{type:"FETCH_FROM_API",options:t}}},Wt=((0,h.registerStore)(C,{reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LANGUAGES":return It(It({},t),{},{languages:e.languages});case"SET_CURRENT_USER":return e.save&&Gt(e.currentUser),It(It({},t),{},{currentUser:e.currentUser});case"SET_FROM_POST":return It(It({},t),{},{fromPost:e.fromPost});default:return t}},selectors:{getLanguages:function(t){return t.languages},getCurrentUser:function(t){return t.currentUser},getFromPost:function(t){return t.fromPost}},actions:Vt,controls:{FETCH_FROM_API:function(t){return m()(It({},t.options))}},resolvers:{getLanguages:Mt().mark((function t(){var e;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/pll/v1/languages",t.next=3,Vt.fetchFromAPI({path:"/pll/v1/languages",filterLang:!1});case 3:return e=t.sent,t.abrupt("return",Vt.setLanguages(T(e,"slug")));case 5:case"end":return t.stop()}}),t)})),getCurrentUser:Mt().mark((function t(){var e;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/wp/v2/users/me",t.next=3,Vt.fetchFromAPI({path:"/wp/v2/users/me",filterLang:!0});case 3:return e=t.sent,t.abrupt("return",Vt.setCurrentUser(e));case 5:case"end":return t.stop()}}),t)}))}}),new Promise((function(t){var e=(0,h.subscribe)((function(){(0,h.select)(C).getLanguages().size>0&&(e(),t())}))})));function Gt(t){m()({path:"/wp/v2/users/me",data:t,method:"POST"})}var Ht=function(){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Ut,null),(0,t.createElement)(zt,null))};(function(){var t;window.location.search,null!==(t=(0,v.isEmpty)(window.location.search)?null:new URLSearchParams(window.location.search))&&(0,h.dispatch)(C).setFromPost({id:wp.sanitize.stripTagsAndEncodeText(t.get("from_post")),postType:wp.sanitize.stripTagsAndEncodeText(t.get("post_type")),newLanguage:wp.sanitize.stripTagsAndEncodeText(t.get("new_lang"))});(0,h.select)(C).getCurrentUser();var e=new Promise((function(t){var e=(0,h.subscribe)((function(){var n=(0,h.select)(k).getCurrentPost();(0,v.isEmpty)(n)||(e(),t())}))}));return Promise.all([e,Wt]).then((function(){var t=(0,h.select)(C).getFromPost();if(!(0,v.isNil)(t)&&!(0,v.isNil)(t.id)){var e=(0,h.select)(k).getEditedPostAttribute("lang"),n=R((0,h.select)(k).getEditedPostAttribute("translations"),(0,h.select)(k).getEditedPostAttribute("translations_table"),e);(0,h.dispatch)(k).editPost({translations:N(n)})}}))})().then((function(t){(0,e.registerPlugin)("polylang-sidebar",{icon:I,render:Ht})}))})(),this["polylang-pro"]=r})();