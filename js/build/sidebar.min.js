(()=>{var e={184:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var s=l.apply(null,n);s&&e.push(s)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()},991:e=>{e.exports=function(){return this.lodash}()},514:e=>{e.exports=function(){return this.wp.apiFetch}()},893:e=>{e.exports=function(){return this.wp.components}()},576:e=>{e.exports=function(){return this.wp.compose}()},848:e=>{e.exports=function(){return this.wp.coreData}()},15:e=>{e.exports=function(){return this.wp.data}()},197:e=>{e.exports=function(){return this.wp.editPost}()},353:e=>{e.exports=function(){return this.wp.editSite}()},293:e=>{e.exports=function(){return this.wp.element}()},638:e=>{e.exports=function(){return this.wp.htmlEntities}()},122:e=>{e.exports=function(){return this.wp.i18n}()},19:e=>{e.exports=function(){return this.wp.keycodes}()},703:e=>{e.exports=function(){return this.wp.notices}()},571:e=>{e.exports=function(){return this.wp.plugins}()},776:e=>{e.exports=function(){return this.wp.primitives}()},470:e=>{e.exports=function(){return this.wp.url}()}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";n.r(a);var e=n(293),t=n(197),l=n(353),r=n(571),s=n(776),o=n(991);const i=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"M6 15v-13h10v13h-10zM5 16h8v2h-10v-13h2v11z"})):"admin-page",c=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"M13.89 3.39l2.71 2.72c0.46 0.46 0.42 1.24 0.030 1.64l-8.010 8.020-5.56 1.16 1.16-5.58s7.6-7.63 7.99-8.030c0.39-0.39 1.22-0.39 1.68 0.070zM11.16 6.18l-5.59 5.61 1.11 1.11 5.54-5.65zM8.19 14.41l5.58-5.6-1.070-1.080-5.59 5.6z"})):"edit",u=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"M17 7v3h-5v5h-3v-5h-5v-3h5v-5h3v5h5z"})):"plus",p=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"M5 7v3l-2 1.5v-6.5h11v-2l4 3.010-4 2.99v-2h-9zM15 13v-3l2-1.5v6.5h-11v2l-4-3.010 4-2.99v2h9z"})):"controls-repeat",d=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"M11 7H9.49c-.63 0-1.25.3-1.59.7L7 5H4.13l-2.39 7h1.69l.74-2H7v4H2c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h7c1.1 0 2 .9 2 2v2zM6.51 9H4.49l1-2.93zM10 8h7c1.1 0 2 .9 2 2v7c0 1.1-.9 2-2 2h-7c-1.1 0-2-.9-2-2v-7c0-1.1.9-2 2-2zm7.25 5v-1.08h-3.17V9.75h-1.16v2.17H9.75V13h1.28c.11.85.56 1.85 1.28 2.62-.87.36-1.89.62-2.31.62-.01.02.22.97.2 1.46.84 0 2.21-.5 3.28-1.15 1.09.65 2.48 1.15 3.34 1.15-.02-.49.2-1.44.2-1.46-.43 0-1.49-.27-2.38-.63.7-.77 1.14-1.77 1.25-2.61h1.36zm-3.81 1.93c-.5-.46-.85-1.13-1.01-1.93h2.09c-.17.8-.51 1.47-1 1.93l-.04.03s-.03-.02-.04-.03z"})):"translation",g=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"M12 4h3c.6 0 1 .4 1 1v1H3V5c0-.6.5-1 1-1h3c.2-1.1 1.3-2 2.5-2s2.3.9 2.5 2zM8 4h3c-.2-.6-.9-1-1.5-1S8.2 3.4 8 4zM4 7h11l-.9 10.1c0 .5-.5.9-1 .9H5.9c-.5 0-.9-.4-1-.9L4 7z"})):"trash",m=!(0,o.isUndefined)(wp.primitives)?(0,e.createElement)(s.SVG,{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)(s.Path,{d:"m10 1 3 6 6 .75-4.12 4.62L16 19l-6-3-6 3 1.13-6.63L1 7.75 7 7z"})):"star-filled",h=((0,o.isUndefined)(wp.primitives),t=>{let{sidebar:n,sidebarName:a,onPromise:l,children:s}=t;return l().then((e=>{(0,r.registerPlugin)(a,{icon:d,render:n})}),(e=>{console.info(e)})),(0,e.createElement)(e.Fragment,null,s)});var f=n(15),y=n(470);const _="pll/metabox",E="core/editor",b="core/edit-site",w="core",v={languages:[],selectedLanguage:{},translatedPosts:{},fromPost:null,currentTemplatePart:{}},P=["wp_template","wp_global_styles"],S=["page"];function T(e){const t={};return e.forEach((function(e,t,n){this[t]=(0,o.isBoolean)(e)?e.toString():e}),t),t}function C(){return!(!document.getElementById("site-editor")&&!document.getElementById("edit-site-editor"))}function N(e){return(0,f.select)(_).getLanguages().get(e)}function x(e,t,n){const a=L(t),l=(0,f.select)(_).getFromPost();let r=new Map(Object.entries([]));return(0,o.isUndefined)(e)||(r=new Map(Object.entries(e))),(0,o.isNil)(l)||(0,o.isNil)(l.id)||a.forEach(((e,t)=>{(0,o.isNil)(e.translated_post)||(0,o.isNil)(e.translated_post.id)||r.set(t,e.translated_post.id)})),r}function k(e){let t=new Map(Object.entries([]));return(0,o.isUndefined)(e)||(t=new Map(Object.entries(e))),t}function L(e){let t=new Map(Object.entries([]));return(0,o.isUndefined)(e)||(t=new Map(Object.entries(e))),t}const A=()=>{if((0,o.isNil)((0,f.select)(E)))return Promise.reject("Polylang languages panel can't be initialized because block editor isn't fully initialized.");M();(0,f.select)(_).getCurrentUser();const e=new Promise((function(e){let t=(0,f.subscribe)((function(){const n=(0,f.select)(E).getCurrentPost();(0,o.isEmpty)(n)||(t(),e())}))}));return Promise.all([e,D()]).then((function(){const e=(0,f.select)(_).getFromPost();if(!(0,o.isNil)(e)&&!(0,o.isNil)(e.id)){(0,f.select)(E).getEditedPostAttribute("lang");const e=x((0,f.select)(E).getEditedPostAttribute("translations"),(0,f.select)(E).getEditedPostAttribute("translations_table"));(0,f.dispatch)(E).editPost({translations:T(e)})}}))},O=()=>{M();(0,f.select)(_).getCurrentUser();const e=new Promise((function(e){let t=(0,f.subscribe)((function(){(0,f.select)(b)&&(t(),e())}))}));return Promise.all([e,D()])},D=()=>new Promise((function(e){let t=(0,f.subscribe)((function(){const n=(0,f.select)(_)?.getLanguages();n?.size>0&&(t(),e())}))}));function M(){const e=(0,o.isEmpty)(window.location.search)?null:new URLSearchParams(window.location.search);null!==e&&(0,f.dispatch)(_).setFromPost({id:wp.sanitize.stripTagsAndEncodeText(e.get("from_post")),postType:wp.sanitize.stripTagsAndEncodeText(e.get("post_type")),newLanguage:wp.sanitize.stripTagsAndEncodeText(e.get("new_lang"))})}const U=()=>{const e=(()=>{const e=(0,f.select)(b);if(!e)return null;const t={postId:e.getEditedPostId(),postType:e.getEditedPostType()};if(e.hasOwnProperty("getEditedPostContext")){const n=e.getEditedPostContext();return n?.postType&&n?.postId?n:t}return t})();return null===e?null:(0,f.select)(w).getEntityRecord("postType",e.postType,e.postId)},R=t=>{let{onPromise:n}=t;const a=(0,e.useRef)({}),l=()=>{var e;const t=U();return null!==(e=N(t?.lang))&&void 0!==e?e:"default"},r=e=>{if(a.current=l(),a?.current.is_default||"default"===a?.current)return;const t=new URL(document.location.href).searchParams,n=new URL(e).searchParams;t.get("postId")!==n.get("postId")&&dispatch(MODULE_CORE_KEY).invalidateResolutionForStore()};return(0,e.useEffect)((()=>{n().then((()=>{a.current=l()})),(e=>{const t=e.pushState,n=e.replaceState;e.pushState=(n,a,l)=>(r(l),t.apply(e,[n,a,l])),e.replaceState=(t,a,l)=>(r(l),n.apply(e,[t,a,l]))})(window.history)}),[]),null};var z=n(703);const{stripTags:F}=wp.sanitize,I=e=>{let{notices:t}=e;if(!t)return null;const{createErrorNotice:n,createInfoNotice:a,createSuccessNotice:l,createWarningNotice:r}=(0,f.useDispatch)(z.store);return t.forEach((e=>{const t={type:"snackbar",explicitDismiss:!0},s=F(e.message);switch(e.type){case"error":n(s,t);break;case"info":a(s,t);break;case"success":l(s,t);break;case"warning":r(s,t)}})),null};var B=n(122);const V=t=>{let{PluginSidebarSlot:n,sidebarName:a,children:l}=t;return(0,e.createElement)(n,{name:a,title:(0,B.__)("Languages","polylang-pro")},l)},j=t=>{let{PluginSidebarMoreMenuItemSlot:n,sidebarName:a}=t;return(0,e.createElement)(n,{target:a},(0,B.__)("Languages","polylang-pro"))};const W=function(t){let{language:n}=t;return(0,o.isNil)(n)?(0,e.createElement)("span",{className:"pll-translation-icon"},d):(0,o.isEmpty)(n.flag_url)?(0,e.createElement)("abbr",null,n.slug,(0,e.createElement)("span",{className:"screen-reader-text"},n.name)):(0,e.createElement)("span",{className:"pll-select-flag"},(0,e.createElement)("img",{src:n.flag_url,alt:n.name,title:n.name,className:"flag"}))};var H=n(893);const $=()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(H.Icon,{icon:m,className:"pll-defaut-lang-icon"}),(0,e.createElement)("span",{className:"screen-reader-text"},(0,B.__)("Default language.","polylang-pro"))),G=t=>{var n;let{language:a,currentPost:l}=t;const r=(0,f.useSelect)((e=>e(w).getPostType(l.type)),[]);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,B.__)("Language","polylang-pro"))),(0,e.createElement)("div",{className:"pll-language-item"},(0,e.createElement)(W,{language:a}),(0,e.createElement)("span",{className:"pll-language-name"},(0,B.__)(a.name,"polylang-pro")),a.is_default&&(0,e.createElement)($,null)),a.is_default&&(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"pll-metabox-info"},null!==(n="wp_template_part"===r?.slug)&&void 0!==n?n:(0,B.__)("This template part is used for languages that have not yet been translated.","polylang-pro"))))},K=t=>{let{children:n}=t;return(0,e.createElement)("div",{className:"components-panel__body is-opened"},(0,e.createElement)("div",{className:"pll-metabox-location"},n))},q=t=>{let{postType:n}=t;return"wp_template"===n?(0,e.createElement)("div",{className:"pll-metabox-error components-notice is-warning"},(0,B.__)("Templates are not translatable, only template parts are.","polylang-pro")):(0,e.createElement)("div",{className:"pll-metabox-error components-notice is-warning"},(0,B.__)("This entity is not translatable.","polylang-pro"))},Q=t=>{let{isError:n,isAllowedPostType:a,postType:l,children:r}=t;return a?n?(0,e.createElement)(K,null,(0,e.createElement)("div",{className:"pll-metabox-error components-notice is-error"},(0,B.__)("Unable to retrieve the content language","polylang-pro"))):(0,e.createElement)(K,null,r):(0,e.createElement)(K,null,(0,e.createElement)(q,{postType:l}))},Y=t=>{let{children:n}=t;return(0,e.createElement)("td",{className:"pll-edit-column pll-column-icon"},n)},X=t=>{let{isDefault:n}=t;return(0,e.createElement)("td",{className:"pll-default-lang-column pll-column-icon"},n&&(0,e.createElement)($,null))},J=t=>{let{children:n}=t;return(0,e.createElement)("td",{className:"pll-delete-column pll-column-icon"},n)},Z=t=>{let{language:n}=t;return(0,e.createElement)("th",{className:"pll-language-column"},(0,o.isEmpty)(n.flag)?(0,e.createElement)("abbr",null,n.slug,(0,e.createElement)("span",{className:"screen-reader-text"},n.name)):(0,e.createElement)("span",{className:"pll-select-flag flag"},(0,e.createElement)("img",{src:n.flag_url,alt:n.name,title:n.name})))},ee=t=>{let{children:n}=t;return(0,e.createElement)("td",{className:"pll-sync-column pll-column-icon"},n)},te=t=>{let{children:n}=t;return(0,e.createElement)("td",{className:"pll-translation-column"},n)},ne=t=>{let{language:n,href:a,handleAddClick:l=null}=t;const r=(0,B.sprintf)((0,B.__)("Add a translation in %s","polylang-pro"),n.name);return(0,e.createElement)(H.Button,{href:a,icon:u,label:r,className:"pll-button",onClick:l,"data-target-language":n.slug},(0,e.createElement)("span",{className:"screen-reader-text"},r))},ae=t=>{let{language:n,disabled:a,onClick:l}=t;const r=(0,B.sprintf)((0,B.__)("Delete the translation in %s","polylang-pro"),n.name);return(0,e.createElement)(H.Button,{icon:g,label:r,disabled:a,className:"pll-button",onClick:l},(0,e.createElement)("span",{className:"screen-reader-text"},r))},le=t=>{let{id:n,postType:a,userPreferenceName:l,activeLabel:r,inactiveLabel:s,icon:o}=t;const i=(0,f.useSelect)((e=>e(_).getCurrentUser()),[]),[c,u]=(0,e.useState)((()=>void 0!==i&&void 0!==i[l]&&void 0!==i[l][a]&&i[l][a])),p=c?r:s;return(0,e.createElement)(H.Button,{id:n,className:`pll-button pll-before-post-translations-button ${c&&"wp-ui-text-highlight"}`,onClick:()=>{(void 0===i[l]||Array.isArray(i[l])&&0===i[l].length)&&(i[l]={}),i[l][a]=!c;const e={};e[l]=i[l],(0,f.dispatch)(_).setCurrentUser(e,!0),u((e=>!e))},icon:o,label:p},(0,e.createElement)("span",{className:"screen-reader-text"},p))},re=t=>{const{path_d:n,...a}=t.icon,l={type:"svg",props:{...a,children:(0,e.createElement)(s.Path,{d:n})}},r={...t,id:"pll-machine-translation",userPreferenceName:`pll_machine_translation_${t.slug}`,activeLabel:(0,B.sprintf)((0,B.__)("Deactivate %s machine translation","polylang-pro"),t.name),inactiveLabel:(0,B.sprintf)((0,B.__)("Activate %s machine translation","polylang-pro"),t.name),icon:l};return(0,e.createElement)(le,r)},se=t=>{const n={...t,id:"pll-duplicate",userPreferenceName:"pll_duplicate_content",activeLabel:(0,B.__)("Deactivate the content duplication","polylang-pro"),inactiveLabel:(0,B.__)("Activate the content duplication","polylang-pro"),icon:i};return(0,e.createElement)(le,n)},oe=t=>{let{language:n,href:a,handleEditClick:l=null}=t;const r=(0,B.sprintf)((0,B.__)("Edit the translation in %s","polylang-pro"),n.name);return(0,e.createElement)(H.Button,{href:a,icon:c,label:r,className:"pll-button",onClick:l,"data-target-language":n.slug},(0,e.createElement)("span",{className:"screen-reader-text"},r))};var ie=n(576);class ce extends e.Component{constructor(){super(...arguments),this.confirmButton=(0,e.createRef)()}componentDidMount(){this.confirmButton.current.focus()}render(){const{idPrefix:t,title:n,updateState:a,handleChange:l,children:r}=this.props;return(0,e.createElement)(H.Modal,{title:n,className:"confirmBox",onRequestClose:a,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,focusOnMount:!1},r,(0,e.createElement)(H.ButtonGroup,{className:"buttons"},(0,e.createElement)(H.Button,{id:`${t}_confirm`,ref:this.confirmButton,isPrimary:!0,onClick:e=>{l(e),a()}},(0,B.__)("OK","polylang-pro")),(0,e.createElement)(H.Button,{id:`${t}_cancel`,isSecondary:!0,onClick:()=>a()},(0,B.__)("Cancel","polylang-pro"))))}}const ue=function(t,n,a){return(0,ie.createHigherOrderComponent)((l=>{class r extends e.Component{constructor(){super(...arguments),this.state={isOpen:!1,changeValue:null},this.handleChange=this.handleChange.bind(this)}handleChange(e){let t=l.getChangeValue(e);const n=this.props.currentPost;(0,o.isNil)(n)||(t={templateId:t,currentPost:n}),!(0,o.isUndefined)(l.bypassConfirmation)&&l.bypassConfirmation(this.props.translationData)?a(t):this.setState({isOpen:!0,changeValue:t})}render(){const r=this.props.translationData?.lang.is_default,s=this.props,i=Object.assign({},{...s},{handleChange:this.handleChange});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l,i),this.state.isOpen&&(0,e.createElement)(ce,{title:l.labelConfirmationModal,idPrefix:t,handleChange:()=>a(this.state.changeValue),updateState:()=>this.setState({isOpen:!1,changeValue:null})},(0,e.createElement)(n,(0,o.isNil)(r)?{}:{isDefaultLang:r})))}}return r.bypassConfirmation=l.bypassConfirmation,r.getChangeValue=l.getChangeValue,r}),"withConfirmation")};class pe extends e.Component{constructor(){super(...arguments)}static handleSynchronizationChange(e){const t=k((0,f.select)(E).getEditedPostAttribute("pll_sync_post"));t.has(e)?t.delete(e):t.set(e,!0),(0,f.dispatch)(E).editPost({pll_sync_post:T(t)}),(0,f.dispatch)(E).editPost({title:(0,f.select)(E).getEditedPostAttribute("title")})}static bypassConfirmation(e){const t=k((0,f.select)(E).getEditedPostAttribute("pll_sync_post")),n=!(0,o.isEmpty)(t)&&t.has(e.lang.slug),a=!(0,o.isUndefined)(e.translated_post)&&!(0,o.isNil)(e.translated_post.id);return n||!a}static getChangeValue(e){return e.currentTarget.id.match(/\[(.[^[]+)\]/i)[1]}render(){const t=k((0,f.select)(E).getEditedPostAttribute("pll_sync_post")),n=this.props.translationData,a=!(0,o.isEmpty)(t)&&t.has(n.lang.slug),l=a&&"wp-ui-text-highlight",r=a?(0,B.__)("Don't synchronize this post","polylang-pro"):(0,B.__)("Synchronize this post","polylang-pro");return(0,e.createElement)(H.Button,{icon:p,label:r,id:`pll_sync_post[${n.lang.slug}]`,className:`pll-button ${l}`,onClick:e=>{this.props.handleChange(e)}},(0,e.createElement)("span",{className:"screen-reader-text"},r))}}pe.labelConfirmationModal=(0,B.__)("Synchronize this post","polylang-pro");const de=ue("pll_sync_post",(function(){return(0,e.createElement)("p",null,(0,B.__)("You are about to overwrite an existing translation. Are you sure you want to proceed?","polylang-pro"))}),pe.handleSynchronizationChange)(pe);var ge=n(184),me=n.n(ge);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _e(e,t){var n=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var l=e.document;"number"!=typeof(n=l.documentElement[a])&&(n=l.body[a])}return n}function Ee(e){return _e(e)}function be(e){return _e(e,!0)}function we(e){var t=function(e){var t,n,a,l=e.ownerDocument,r=l.body,s=l&&l.documentElement;return n=(t=e.getBoundingClientRect()).left,a=t.top,{left:n-=s.clientLeft||r.clientLeft||0,top:a-=s.clientTop||r.clientTop||0}}(e),n=e.ownerDocument,a=n.defaultView||n.parentWindow;return t.left+=Ee(a),t.top+=be(a),t}var ve,Pe=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),Se=/^(top|right|bottom|left)$/,Te="currentStyle",Ce="runtimeStyle",Ne="left";function xe(e,t){for(var n=0;n<e.length;n++)t(e[n])}function ke(e){return"border-box"===ve(e,"boxSizing")}"undefined"!=typeof window&&(ve=window.getComputedStyle?function(e,t,n){var a="",l=e.ownerDocument,r=n||l.defaultView.getComputedStyle(e,null);return r&&(a=r.getPropertyValue(t)||r[t]),a}:function(e,t){var n=e[Te]&&e[Te][t];if(Pe.test(n)&&!Se.test(t)){var a=e.style,l=a[Ne],r=e[Ce][Ne];e[Ce][Ne]=e[Te][Ne],a[Ne]="fontSize"===t?"1em":n||0,n=a.pixelLeft+"px",a[Ne]=l,e[Ce][Ne]=r}return""===n?"auto":n});var Le=["margin","border","padding"],Ae=-1,Oe=2,De=1;function Me(e,t,n){var a,l,r,s=0;for(l=0;l<t.length;l++)if(a=t[l])for(r=0;r<n.length;r++){var o=void 0;o="border"===a?"".concat(a+n[r],"Width"):a+n[r],s+=parseFloat(ve(e,o))||0}return s}function Ue(e){return null!=e&&e==e.window}var Re={};function ze(e,t,n){if(Ue(e))return"width"===t?Re.viewportWidth(e):Re.viewportHeight(e);if(9===e.nodeType)return"width"===t?Re.docWidth(e):Re.docHeight(e);var a="width"===t?["Left","Right"]:["Top","Bottom"],l="width"===t?e.offsetWidth:e.offsetHeight,r=(ve(e),ke(e)),s=0;(null==l||l<=0)&&(l=void 0,(null==(s=ve(e,t))||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===n&&(n=r?De:Ae);var o=void 0!==l||r,i=l||s;if(n===Ae)return o?i-Me(e,["border","padding"],a):s;if(o){var c=n===Oe?-Me(e,["border"],a):Me(e,["margin"],a);return i+(n===De?0:c)}return s+Me(e,Le.slice(n),a)}xe(["Width","Height"],(function(e){Re["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Re["viewport".concat(e)](n))},Re["viewport".concat(e)]=function(t){var n="client".concat(e),a=t.document,l=a.body,r=a.documentElement[n];return"CSS1Compat"===a.compatMode&&r||l&&l[n]||r}}));var Fe={position:"absolute",visibility:"hidden",display:"block"};function Ie(e){var t,n=arguments;return 0!==e.offsetWidth?t=ze.apply(void 0,n):function(e,t,n){var a,l={},r=e.style;for(a in t)t.hasOwnProperty(a)&&(l[a]=r[a],r[a]=t[a]);for(a in n.call(e),t)t.hasOwnProperty(a)&&(r[a]=l[a])}(e,Fe,(function(){t=ze.apply(void 0,n)})),t}function Be(e,t,n){var a=n;if("object"!==he(t))return void 0!==a?("number"==typeof a&&(a+="px"),void(e.style[t]=a)):ve(e,t);for(var l in t)t.hasOwnProperty(l)&&Be(e,l,t[l])}xe(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Re["outer".concat(t)]=function(t,n){return t&&Ie(t,e,n?0:De)};var n="width"===e?["Left","Right"]:["Top","Bottom"];Re[e]=function(t,a){if(void 0===a)return t&&Ie(t,e,Ae);if(t){ve(t);return ke(t)&&(a+=Me(t,["padding","border"],n)),Be(t,e,a)}}}));var Ve=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return we(e);!function(e,t){"static"===Be(e,"position")&&(e.style.position="relative");var n,a,l=we(e),r={};for(a in t)t.hasOwnProperty(a)&&(n=parseFloat(Be(e,a))||0,r[a]=n+t[a]-l[a]);Be(e,r)}(e,t)},isWindow:Ue,each:xe,css:Be,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var a in e)e.hasOwnProperty(a)&&(t.overflow[a]=e.overflow[a]);return t},scrollLeft:function(e,t){if(Ue(e)){if(void 0===t)return Ee(e);window.scrollTo(t,be(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(Ue(e)){if(void 0===t)return be(e);window.scrollTo(Ee(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},Re);const je=function(e,t,n){n=n||{},9===t.nodeType&&(t=Ve.getWindow(t));var a=n.allowHorizontalScroll,l=n.onlyScrollIfNeeded,r=n.alignWithTop,s=n.alignWithLeft,o=n.offsetTop||0,i=n.offsetLeft||0,c=n.offsetBottom||0,u=n.offsetRight||0;a=void 0===a||a;var p,d,g,m,h,f,y,_,E,b,w=Ve.isWindow(t),v=Ve.offset(e),P=Ve.outerHeight(e),S=Ve.outerWidth(e);w?(y=t,b=Ve.height(y),E=Ve.width(y),_={left:Ve.scrollLeft(y),top:Ve.scrollTop(y)},h={left:v.left-_.left-i,top:v.top-_.top-o},f={left:v.left+S-(_.left+E)+u,top:v.top+P-(_.top+b)+c},m=_):(p=Ve.offset(t),d=t.clientHeight,g=t.clientWidth,m={left:t.scrollLeft,top:t.scrollTop},h={left:v.left-(p.left+(parseFloat(Ve.css(t,"borderLeftWidth"))||0))-i,top:v.top-(p.top+(parseFloat(Ve.css(t,"borderTopWidth"))||0))-o},f={left:v.left+S-(p.left+g+(parseFloat(Ve.css(t,"borderRightWidth"))||0))+u,top:v.top+P-(p.top+d+(parseFloat(Ve.css(t,"borderBottomWidth"))||0))+c}),h.top<0||f.top>0?!0===r?Ve.scrollTop(t,m.top+h.top):!1===r?Ve.scrollTop(t,m.top+f.top):h.top<0?Ve.scrollTop(t,m.top+h.top):Ve.scrollTop(t,m.top+f.top):l||((r=void 0===r||!!r)?Ve.scrollTop(t,m.top+h.top):Ve.scrollTop(t,m.top+f.top)),a&&(h.left<0||f.left>0?!0===s?Ve.scrollLeft(t,m.left+h.left):!1===s?Ve.scrollLeft(t,m.left+f.left):h.left<0?Ve.scrollLeft(t,m.left+h.left):Ve.scrollLeft(t,m.left+f.left):l||((s=void 0===s||!!s)?Ve.scrollLeft(t,m.left+h.left):Ve.scrollLeft(t,m.left+f.left)))};var We=n(638),He=n(19),$e=n(514),Ge=n.n($e);const Ke=e=>{let{value:t,post:n=null,translatedPosts:a,translationData:l,language:r}=e;(0,o.isEmpty)(n)?(l.translated_post={id:null,title:t},l.links={add_link:l.links.add_link},a.delete(r.slug)):(a.set(r.slug,n.id),l.translated_post={id:n.id,title:n.title.rendered},l.block_editor={edit_link:n.block_editor.edit_link},l.caps=n.caps),(0,f.dispatch)(E).editPost({translations:T(a)}),(0,f.dispatch)(E).editPost({title:(0,f.select)(E).getEditedPostAttribute("title")})},qe=e=>e.stopPropagation();class Qe extends e.Component{constructor(){super(...arguments),this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.bindListNode=this.bindListNode.bind(this),this.updateSuggestions=(0,o.debounce)(this.updateSuggestions.bind(this),500),this.suggestionNodes=[],this.state={posts:[],showSuggestions:!1,selectedSuggestion:null}}componentDidUpdate(){const{showSuggestions:e,selectedSuggestion:t}=this.state;e&&null!==t&&!this.scrollingIntoView&&(this.scrollingIntoView=!0,je(this.suggestionNodes[t],this.listNode,{onlyScrollIfNeeded:!0}),setTimeout((()=>{this.scrollingIntoView=!1}),100))}componentWillUnmount(){delete this.suggestionsRequest}bindListNode(e){this.listNode=e}bindSuggestionNode(e){return t=>{this.suggestionNodes[e]=t}}updateSuggestions(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length<2&&!t)return void this.setState({showSuggestions:!1,selectedSuggestion:null,loading:!1});this.setState({selectedSuggestion:null,loading:!0});const n=(0,f.select)(E).getCurrentPostId(),a=(0,f.select)(E).getCurrentPostType(),l=(0,f.select)(E).getEditedPostAttribute("lang"),r=this.props.translationData.lang.slug,s=Ge()({path:(0,y.addQueryArgs)("/pll/v1/untranslated-posts",{search:e,include:n,untranslated_in:l,lang:r,type:a,context:"edit"})});s.then((e=>{this.suggestionsRequest===s&&(this.setState({posts:e,showSuggestions:!0,loading:!1}),e.length?this.props.debouncedSpeak((0,B.sprintf)((0,B._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"polylang-pro"),e.length),"assertive"):this.props.debouncedSpeak((0,B.__)("No results.","polylang-pro"),"assertive"))})).catch((()=>{this.suggestionsRequest===s&&this.setState({loading:!1})})),this.suggestionsRequest=s}onChange(e){const t=e.target.value,n=this.props.translatedPosts,a=this.props.translationData,l=this.props.translationData.lang;Ke({value:t,translatedPosts:n,translationData:a,language:l}),this.updateSuggestions(t)}onKeyDown(e){const{showSuggestions:t,selectedSuggestion:n,posts:a,loading:l}=this.state;let r=e.target.value,s=!1;if(t&&a.length&&!l)switch(e.keyCode){case He.UP:{e.stopPropagation(),e.preventDefault();const t=n?n-1:a.length-1;this.setState({selectedSuggestion:t});break}case He.DOWN:{e.stopPropagation(),e.preventDefault();const t=null===n||n===a.length-1?0:n+1;this.setState({selectedSuggestion:t});break}case He.ENTER:if(null!==this.state.selectedSuggestion){e.stopPropagation();const t=this.state.posts[this.state.selectedSuggestion];this.selectLink(t)}break;case He.ESCAPE:e.stopPropagation(),this.setState({selectedSuggestion:null,showSuggestions:!1})}else{switch(e.keyCode){case He.SPACE:const{ctrlKey:t,shiftKey:n,altKey:a,metaKey:l}=e;t&&!(n||a||l)&&(r="",s=!0);break;case He.BACKSPACE:(0,o.isEmpty)(r)&&(s=!0)}s&&this.updateSuggestions(r,!0)}}selectLink(e){const t=this.props.translationData,n=this.props.translatedPosts,a=this.props.translationData.lang;Ke({value:e.title.rendered,post:e,translatedPosts:n,translationData:t,language:a}),this.setState({selectedSuggestion:null,showSuggestions:!1})}render(){const{value:t="",autoFocus:n=!0,instanceId:a,translationData:l}=this.props,r=l.lang,{showSuggestions:s,posts:o,selectedSuggestion:i,loading:c}=this.state,u=l.caps.edit||l.caps.add;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("label",{className:"screen-reader-text",htmlFor:`tr_lang_${l.lang.slug}`},(0,B.__)("Translation","polylang-pro")),(0,e.createElement)("div",{className:"translation-input"},(0,e.createElement)("input",{lang:r.w3c,dir:r.is_rtl?"rtl":"ltr",style:{direction:r.is_rtl?"rtl":"ltr"},autoFocus:n,disabled:!u,type:"text","aria-label":(0,B.__)("URL","polylang-pro"),required:!0,value:t,onChange:this.onChange,onInput:qe,placeholder:(0,B.__)("Start typing the post title","polylang-pro"),onKeyDown:this.onKeyDown,role:"combobox","aria-expanded":s,"aria-autocomplete":"list","aria-owns":`translation-input-suggestions-${a}`,"aria-activedescendant":null!==i?`translation-input-suggestion-${a}-${i}`:void 0}),c&&(0,e.createElement)(H.Spinner,null)),s&&!!o.length&&(0,e.createElement)(H.Popover,{position:"bottom",noArrow:!0,focusOnMount:!1},(0,e.createElement)("div",{className:"translation-input__suggestions",id:`translation-input-suggestions-${a}`,ref:this.bindListNode,role:"listbox"},o.map(((t,n)=>(0,e.createElement)("button",{key:t.id,role:"option",tabIndex:"-1",id:`translation-input-suggestion-${a}-${n}`,ref:this.bindSuggestionNode(n),className:me()("translation-input__suggestion",{"is-selected":n===i}),onClick:()=>this.selectLink(t),"aria-selected":n===i},(0,We.decodeEntities)(t.title.rendered)||(0,B.__)("(no title)","polylang-pro")))))))}}const Ye=(0,H.withSpokenMessages)((0,ie.withInstanceId)(Qe)),Xe=t=>{let{language:n,children:a}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(Z,{language:n}),a)},Je=t=>{let{selectedLanguage:n,translationsTable:a}=t;const l=x((0,f.select)(E).getEditedPostAttribute("translations"),a,n.slug);return Array.from(a.values()).map((t=>{if(n.slug===t.lang.slug)return;const a=null!=t.translated_post?.id,r=t.caps.edit,s=t.caps.add;return(0,e.createElement)("tr",{key:t.lang.slug},(0,e.createElement)(Xe,{language:t.lang},(0,e.createElement)(Y,null,a&&r?(0,e.createElement)(oe,{href:decodeURI(t.block_editor.edit_link),language:t.lang}):s?(0,e.createElement)(ne,{href:decodeURI(t.links.add_link),language:t.lang}):null),(0,e.createElement)(ee,null,t.can_synchronize&&(0,e.createElement)(de,{translationData:t})),(0,e.createElement)(te,null,(0,e.createElement)(Ye,{id:`htr_lang_${t.lang.slug}`,autoFocus:!1,translatedPosts:l,translationData:t,value:void 0!==t.translated_post?.title?t.translated_post?.title:""}))))}))},Ze=t=>{let{isDefaultLang:n}=t;return(0,e.createElement)(e.Fragment,null,n?(0,e.createElement)("p",null,(0,B.__)("You are about to delete an entity in the default language.","polylang-pro"),(0,e.createElement)("br",null),(0,B.__)("This will delete its customizations and all its corresponding translations.","polylang-pro")):null,(0,e.createElement)("p",null,(0,B.__)("Are you sure you want to delete this translation?","polylang-pro")))};var et=n(848);const tt=()=>{const{deleteEntityRecord:e}=(0,f.useDispatch)(et.store),{createSuccessNotice:t,createErrorNotice:n}=(0,f.useDispatch)(z.store);return{handleDelete:async(a,l)=>{try{const n=!S.includes(l);await e("postType",l,a,{force:n},{throwOnError:!0}),t((0,B.__)("The translation has been deleted.","polylang-pro"),{type:"snackbar"})}catch(e){n((0,B.sprintf)((0,B.__)("Unable to delete the translation. %s","polylang-pro"),e?.message),{type:"snackbar"})}}}},nt=(e,t)=>{if(!e.is_default||"page"===t)return;const n=window.location.origin+wp.sanitize.stripTags(window.location.pathname),a={};switch(t){case"wp_navigation":a.path="/navigation";break;case"wp_block":a.path="/patterns",a.categoryType=t;break;case"wp_template_part":a.path="/"+t+"/all"}location.href=(0,y.addQueryArgs)(n,a)},at=t=>{let{translationData:n,postType:a,onDeleteSuccess:l}=t;const[r,s]=(0,e.useState)(!1),o=()=>s(!1),i=null!=n.translated_post?.id,c=n.caps.delete,{handleDelete:u}=tt();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(ae,{onClick:()=>s(!0),language:n.lang,disabled:!i||!c}),r&&(0,e.createElement)(H.Modal,{title:"Delete",onRequestClose:o},(0,e.createElement)(Ze,{isDefaultLang:n.lang.is_default&&"page"!==a}),(0,e.createElement)("div",{role:"group",className:"components-button-group buttons"},(0,e.createElement)(H.Button,{variant:"tertiary",onClick:o,type:"button"},(0,B.__)("Cancel","polylang-pro")),(0,e.createElement)("span",null,"Â "),(0,e.createElement)(H.Button,{variant:"primary",onClick:()=>{const e="wp_template_part"===a&&void 0!==n.template?n.template.id:n.translated_post.id;u(e,a).then((()=>l())),o(),nt(n.lang,a)},type:"submit"},(0,B.__)("Delete","polylang-pro")))))},lt=()=>{const{saveEntityRecord:e}=(0,f.useDispatch)(et.store),{createSuccessNotice:t,createErrorNotice:n}=(0,f.useDispatch)(z.store);return{handleCreateTranslation:async(a,l)=>{const r={title:l.title.raw,content:l.content.raw,lang:a,from_post:l.id,translations:l.translations,status:l.status};if("wp_template_part"===l.type){const e=function(){let e="[a-z_-]+";const t=(0,f.select)(_).getLanguages(),n=Array.from(t.keys());return(0,o.isEmpty)(n)||(e=n.join("|")),new RegExp(`___(?:${e})$`)}(),t=l.slug.replace(e,""),n={[l.lang]:l.wp_id};r.slug=t,r.area=l.area,r.from_post=l.wp_id,r.translations=n}try{const n=await e("postType",l.type,r,{throwOnError:!0});t((0,B.__)("The translation is created, you will be redirected.","polylang-pro"),{type:"snackbar"});const s=n.translations_table[a]?.site_editor.edit_link;void 0!==s&&(location.href=s)}catch(e){const t=e.message&&"unknown_error"!==e.code?e.message:(0,B.__)("An error occurred while creating the translation.","polylang-pro");n(t,{type:"snackbar"})}}}},rt=t=>{let{translationsTable:n,currentPost:a,translationsTabeDispatch:l}=t;const{handleCreateTranslation:r}=lt();return Array.from(n.values()).map((t=>{if(a?.lang===t.lang.slug)return;const n=null!=t.translated_post?.id,s=t.caps.edit,o="wp_template_part"===a.type&&!a.wp_id||t.caps.add;return(0,e.createElement)("tr",{key:t.lang.slug},(0,e.createElement)(Xe,{language:t.lang},(0,e.createElement)(te,null,(0,e.createElement)("span",{className:"pll-translation-language"},t.lang.name)),(0,e.createElement)(Y,null,(()=>{if(n&&s)return(0,e.createElement)(oe,{href:decodeURI(t.site_editor.edit_link),language:t.lang});if(o){const n=()=>{r(t.lang.slug,a)};return(0,e.createElement)(ne,{href:"#",language:t.lang,handleAddClick:n})}return null})()),(0,e.createElement)(J,null,(0,e.createElement)(at,{translationData:t,postType:a.type,onDeleteSuccess:function(){l({type:"remove_translation",lang:t.lang.slug})}})),(0,e.createElement)(X,{isDefault:t.lang.is_default})))}))},st=t=>{let{children:n}=t;return(0,e.createElement)("div",{id:"post-translations",className:"translations"},(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,B.__)("Translations","polylang-pro"))),(0,e.createElement)("table",null,(0,e.createElement)("tbody",null,n)))},ot=(e,t)=>{switch(t.type){case"remove_translation":return delete e.get(t.lang).translated_post,new Map(e);case"set_table":return t.table;default:return e}},it=()=>{const[t,n]=(0,e.useReducer)(ot,new Map),[a,l]=(0,e.useState)({}),[r,s]=(0,e.useState)({}),[o,i]=(0,e.useState)("");return(0,e.useEffect)((()=>{let e;if("/wp_global_styles"===wp.sanitize.stripTagsAndEncodeText((0,y.getQueryArg)(window.location.href,"path"))&&(e="wp_global_styles"),"wp_template"===wp.sanitize.stripTagsAndEncodeText((0,y.getQueryArg)(window.location.href,"postType"))&&(e="wp_template"),e)return void i(e);const t=U();l(t),i(t?.type);const a=N(t?.lang);s(a),n({type:"set_table",table:L(t?.translations_table)})}),[l,i,s,n]),(0,e.createElement)(Q,{isError:!r,isAllowedPostType:!P.includes(o),postType:o},(0,e.createElement)(G,{language:r,currentPost:a}),(0,e.createElement)(st,null,(0,e.createElement)(rt,{translationsTable:t,currentPost:a,translationsTabeDispatch:n})))};function ct(t){let{handleChange:n,children:a,selectedLanguage:l=null,defaultValue:r=""}=t;const s=l?.slug?l.slug:r;return(0,e.createElement)("div",{id:"select-post-language"},(0,e.createElement)(W,{language:l}),a&&(0,e.createElement)("select",{value:s,onChange:e=>n(e),id:"pll_post_lang_choice",name:"pll_post_lang_choice",className:"post_lang_choice"},a))}function ut(t){let{languages:n}=t;return Array.from(n.values()).map((t=>{let{slug:n,name:a,w3c:l}=t;return(0,e.createElement)("option",{value:n,lang:l,key:n},a)}))}class pt extends e.Component{static bypassConfirmation(){const e=(0,f.select)(E);return!e.getEditedPostAttribute("title")?.trim()&&!e.getEditedPostContent()&&!e.getEditedPostAttribute("excerpt")?.trim()}static getChangeValue(e){return e.target.value}static handleLanguageChange(e){const t=(0,f.select)(E).getEditedPostAttribute("lang"),n=(0,f.select)(E).getCurrentPostId(),a=(0,f.select)(_).getLanguages().get(e),l=N(t),r=k((0,f.select)(E).getEditedPostAttribute("pll_sync_post")),s=(0,f.select)(E).getEditedPostAttribute("translations_table"),o=x((0,f.select)(E).getEditedPostAttribute("translations"),s,l.slug),i=L(s,l.slug);o.delete(l.slug),o.set(a.slug,n),r.delete(l.slug);const c=i.get(l.slug);i.set(l.slug,{can_synchronize:c.can_synchronize,lang:c.lang,links:{add_link:c.links.add_link},caps:c.caps,site_editor:c.site_editor,block_editor:c.block_editor});const u=i.get(a.slug);i.set(a.slug,{can_synchronize:u.can_synchronize,lang:u.lang,links:u.links,translated_post:c.translated_post,caps:u.caps,site_editor:u.site_editor,block_editor:u.block_editor}),pll_block_editor_plugin_settings.lang=a;const p={lang:a.slug,pll_sync_post:T(r),translations:T(o),translations_table:T(i)};(0,f.dispatch)(E).editPost(p),(0,f.dispatch)(E).savePost(),pt.forceLanguageSave(a.slug),(0,f.dispatch)(w).invalidateResolutionForStore()}static forceLanguageSave(e){const t=(0,f.select)(E);t.getEditedPostAttribute("title")||t.getEditedPostContent()||t.getEditedPostAttribute("excerpt")||Ge()({path:(0,y.addQueryArgs)(`wp/v2/posts/${t.getCurrentPostId()}`,{lang:e}),method:"POST"})}render(){const t=(0,f.select)(_).getLanguages(),n=N((0,f.select)(E).getEditedPostAttribute("lang"));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,B.__)("Language","polylang-pro"))),(0,e.createElement)("label",{className:"screen-reader-text",htmlFor:"pll_post_lang_choice"},(0,B.__)("Language","polylang-pro")),(0,e.createElement)(ct,{selectedLanguage:n,handleChange:this.props.handleChange},(0,e.createElement)(ut,{languages:t})))}}pt.labelConfirmationModal=(0,B.__)("Change language","polylang-pro");const dt=ue("pll_change_lang",(function(){return(0,e.createElement)("p",null,(0,B.__)("Are you sure you want to change the language of the current content?","polylang-pro"))}),pt.handleLanguageChange)(pt),gt=()=>{const{currentPost:t,currentPostType:n,selectedLanguage:a,translationsTable:l,isAllowedPostType:r}=(0,f.useSelect)((e=>{const t=e(E).getCurrentPost(),n=e(E).getCurrentPostType(),a=e(E).getEditedPostAttribute("lang"),l=e(E).getEditedPostAttribute("translations_table"),r=!P.includes(t?.type);return{currentPost:t,currentPostType:n,selectedLanguage:N(a),translationsTable:L(l),isAllowedPostType:r}}),[]),s=pll_block_editor_plugin_settings.machine_translation;return(0,e.createElement)(Q,{isError:!a,isAllowedPostType:r,postType:t?.type},(0,e.createElement)(dt,{selectedLanguage:a}),(0,e.createElement)(se,{postType:n}),s?.isActive&&(0,e.createElement)(re,{postType:n,slug:s.slug,name:s.name,icon:s.icon}),(0,e.createElement)(st,null,(0,e.createElement)(Je,{translationsTable:l,selectedLanguage:a})))},mt={setLanguages:e=>({type:"SET_LANGUAGES",languages:e}),setCurrentUser(e){return{type:"SET_CURRENT_USER",currentUser:e,save:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},setFromPost:e=>({type:"SET_FROM_POST",fromPost:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",options:e})},ht=(0,f.createReduxStore)(_,{reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LANGUAGES":return{...e,languages:t.languages};case"SET_CURRENT_USER":if(!t.save)return{...e,currentUser:t.currentUser};(n=t.currentUser,Promise.resolve(Ge()({path:"/wp/v2/users/me",data:n,method:"POST"}))).then((n=>(t.currentUser=n,{...e,currentUser:t.currentUser})));case"SET_FROM_POST":return{...e,fromPost:t.fromPost};case"SET_CURRENT_TEMPLATE_PART":return{...e,currentTemplatePart:t.currentTemplatePart};default:return e}var n},selectors:{getLanguages:e=>e.languages,getCurrentUser:e=>e.currentUser,getFromPost:e=>e.fromPost},actions:mt,controls:{FETCH_FROM_API:e=>Ge()({...e.options})},resolvers:{*getLanguages(){const e=yield mt.fetchFromAPI({path:"/pll/v1/languages",filterLang:!1});return mt.setLanguages(function(e,t){const n=new Map;return e.reduce((function(e,n){return e.set(n[t],n),e}),n),n}(e,"slug"))},*getCurrentUser(){const e=yield mt.fetchFromAPI({path:"/wp/v2/users/me",filterLang:!0});return mt.setCurrentUser(e)}}});(0,f.register)(ht);const ft=document.createElement("div");ft.id="pll-root";const yt=document.body.appendChild(ft),_t="polylang-sidebar",Et=pll_block_editor_plugin_settings?.machine_translation?.errors,bt=(t,n)=>{e.createRoot?(0,e.createRoot)(n).render(t):(0,e.render)(t,n)};if(C()){const t=()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(V,{PluginSidebarSlot:l.PluginSidebar,sidebarName:_t},(0,e.createElement)(it,null)),(0,e.createElement)(j,{PluginSidebarMoreMenuItemSlot:l.PluginSidebarMoreMenuItem,sidebarName:_t}));bt((0,e.createElement)(h,{sidebar:t,sidebarName:_t,onPromise:O},(0,e.createElement)(R,{onPromise:O})),yt)}else{const n=()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(V,{PluginSidebarSlot:t.PluginSidebar,sidebarName:_t},(0,e.createElement)(gt,null)),(0,e.createElement)(j,{PluginSidebarMoreMenuItemSlot:t.PluginSidebarMoreMenuItem,sidebarName:_t}));bt((0,e.createElement)(h,{sidebar:n,sidebarName:_t,onPromise:A},void 0!==Et&&(0,e.createElement)(I,{notices:Et})),yt)}})(),this["polylang-pro"]=a})();